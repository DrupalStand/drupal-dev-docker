#!/usr/bin/env bash

PARAMS=""
USING_STDIN="t"

# Get environment variables from .env
export $(grep -v '^#' .env | xargs -d '\n')

# if using stdin then we need to disable tty mode
if [ ! -t 0 ] ; then USING_STDIN=""; fi

for PARAM in "$@"
do
  PARAMS="${PARAMS} \"${PARAM}\""
done
echo ${PROJECT}-${ENV}-web
docker exec -i$USING_STDIN ${PROJECT}-${ENV}-php sh -c "/var/www/vendor/bin/drush --root=/var/www/web ${PARAMS}"
